# Releasing Flow

## Versioning

Flow uses [Semantic Versioning](https://semver.org): `MAJOR.MINOR.PATCH`

- **PATCH** — fixes to existing commands, wording corrections
- **MINOR** — new commands, new params fields, backwards-compatible changes
- **MAJOR** — breaking changes to workflow structure or params schema

The single source of truth is `SPECS/VERSION`. Each command file also carries a matching `**Version:**` header — update both when releasing. The install script copies `SPECS/VERSION` into the target repo so users can always check which version of Flow they have installed.

## Release Artifact

A tag release includes:

```
GitHub source archives (auto-generated by GitHub)
flow-v{VERSION}-minimal.zip (uploaded by workflow)
```

`flow-v{VERSION}-minimal.zip` contains:

```
install.sh
SPECS/COMMANDS/
```

The installer supports this minimal bundle and generates fallback `SPECS/VERSION` and starter user files when template files are not present.

## Release Process (Automated on Tag Push)

### 1. Bump the version

Update `SPECS/VERSION` and the `**Version:**` header in every `SPECS/COMMANDS/*.md` that changed.

### 2. Commit

```bash
git add SPECS/VERSION SPECS/COMMANDS/
git commit -m "Release v{VERSION}"
```

### 3. Tag

```bash
git tag v{VERSION}
git push origin main
git push origin v{VERSION}
```

### 4. Workflow publishes the release

On push of `v*` tags, `.github/workflows/release.yml` will:

- Create `flow-v{VERSION}-minimal.zip` containing only `install.sh` and `SPECS/COMMANDS/`
- Create the GitHub Release automatically (or update assets if the release already exists)
- Upload the minimal zip artifact to the release

## User Installation

```bash
# Download minimal release artifact from GitHub Release assets
curl -sSL -o flow.zip https://github.com/SoundBlaster/Flow/releases/download/v{VERSION}/flow-v{VERSION}-minimal.zip
unzip flow.zip
./flow-v{VERSION}-minimal/install.sh /path/to/repo

# Local (after cloning)
./install.sh /path/to/repo
```

## Checklist

- [ ] `SPECS/VERSION` updated
- [ ] Command file headers updated
- [ ] Commit and tag pushed
- [ ] GitHub Release created
